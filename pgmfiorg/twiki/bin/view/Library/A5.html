
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<link rel="STYLESHEET" type="text/css" href="../../../style.css">

<head>
 <title> PGMFI.ORG - Grassroots ECU Development - Library . A5   </title>
 <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /> 
  %HTTP_EQUIV_ON_VIEW%
 ="" />
 <link rel="STYLESHEET" type="text/css" href="../../../style.css">
</head>
<body  background="../../../images/background.gif">
<p />
<a name="PageTop"></a>
<form name="main" action="A5.html">
   <!-- Constraining Table -->
   <table align="center" width="768" cellspacing="0" cellpadding="0" border="0" class="tableborder" bgcolor="#FFFFFF"><tr><td>
   <table align="center" cellspacing="0" cellpadding="0" border="0" width="100%">
   <tr>
    <td colspan="3"><img src="../../../images/layout/top.gif" width="768" height="8" border="0" alt=""></td>
   </tr>
   <tr>
    <td><A HREF="../../view.1.html"><img src="../../../images/layout/logo.gif" width="290" height="60" border="0" alt="PGMFI Logo"></a></td>
    <td>

<SCRIPT type="text/javascript" language="Javascript" SRC="/~jon/includes/pgmfiAd.js">
</SCRIPT>
<script type="text/javascript" src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
</td>
    <td><img src="../../../images/layout/side.gif" width="10" height="60" border="0" alt=""></td>
   </tr>
   <tr>
    <td colspan="3"><img src="../../../images/layout/bottom.gif" width="768" height="13" border="0" alt=""></td>
   </tr>
   <tr>
    <td colspan="3"><img src="../../../images/layout/shadow.gif" width="768" height="4" border="0" alt=""></td>
   </tr>
   </table>
   <table align="center" bgcolor="#dedede" width="100%" cellspacing="2" cellpadding="2" border="0">
   <tr>
    <td>
      <table width="100%" border="0" cellpadding="3" cellspacing="0">
      <tr>
      <td><FONT CLASS="regblack"><a href="WebHome.html">Library</a>&gt; <b>A5</b>   </font></td>
      <td align="right" valign="top"><FONT CLASS="smallblack"><B>Destinations: </b><a href="../Home/WebHome.html">Home</a>  |  <a href="WebHome.html">Library</a>  |  <a href="WebChanges.html">Change&nbsp;Log</a>  |  <a href="WebIndex.html">Index</a></FONT></td>
      </tr>
      </table>
   </td>
   </tr>
   </table>
   <table align="center" cellspacing="0" cellpadding="0" border="0" width="100%">
   <tr>
    <td bgcolor="#000000"><img src="../../../images/space.gif" width="1" height="1" border="0" alt=""></td>
   </tr>
   <tr>
    <td bgcolor="#000000"><img src="../../../images/layout/shadow.gif" width="768" height="4" border="0" alt=""></td>
   </tr>
   </table>
   <table align="center" bgcolor="#FFFFFF" width="100%" cellspacing="2" cellpadding="2" border="0">
   <tr>
    <td><FONT CLASS="regblack"><div align="right"> <a href="WebSearch.html">Search</a>  |  Go <input type="text" name="topic" size="16" /> </div>
<p />
</form>
<p />
A5h (opcode 'A5' in hexidecimal) is the "reserved" opcode of the 8051 instruction set. This means it is NOT a valid instruction to a pure 8051 microcontroller. In the 8052 and many other 8051 derivatives, the A5 opcode is used to signal that something special is going to happen, like an extended opcode instruction. A5 can also be used in conjunction with an invalid opcode handler as a odd sort of interrupt.
Unfortunately, in the Oki 8XC154 Microcontrollers, A5h is used in a somewhat unique way. I say unfortunately because the peculiar implementation of the A5 opcode used by oki makes it minorly incompatible with all standard 8051 disassemblers.
<p />
A5h as used by oki is a 3 byte instruction: A5 XX YY
<ul>
<li> A5 = MOV (two bit address arguments)
</li>
<li> XX = bit address of source
</li>
<li> YY = bit address of destination
</li>
</ul>
<p />
C. Favreau experimentally verified this using a test board where he experimented with register states using the A5 instruction. It moves bits, and takes bit addresses (see a 8051 tutorial) as arguments.
<p />
Johnathan Wong said that he was able to replace A5 successfully with:
<p />
;:MOV <a href="CCarryBit.html">C </a>, SRCBIT (XX above)
;:MOV DSTBIT, <a href="CCarryBit.html">C </a> (YY above)
<p />
Initially, it was thought that this approach would not work because the state of <a href="CCarryBit.html">C </a> had tobe maintained - in fact JW claims that the state of <a href="CCarryBit.html">C </a> must be altered in order for the car to work right.
<p />
It has been confirmed that instances of A5h can be replaced with MOV C, SRCBIT MOV DSTBIT, C in order to get honda <a href="ROM.html">ROM</a>s to run on "standard" 8051 chips.
<p />
Dave Blundell modified <a href="http://www.8052.com/users/disasm/" target="_top">d51</a> to support Oki's non-standard use of <a href="A5.html">A5</a>.  Chris Favreau compiled some windows binaries for it.  You can download the source and linux/win binaries of <a href="PgmfiD51.html">Pgmfi&nbsp;D51</a>.
<p />
<p />
<p />
<table width="100%" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="left"> <font size="-1"></font></td>
</tr>
</table>
<p />
</td></tr></table>
<p />
      <table width="768" border="0" cellpadding="3" cellspacing="0">
      <tr>
        <td valign="center" align="left"><FONT CLASS="smallblack"></FONT></td>
        <td valign="center" align="center"><FONT CLASS="smallblack"> 
   <b>Revision:</b> r1.1 - 05 Mar 2004 - 19:37 GMT - blundar 
</FONT></td>
       <td valign="center" align="right"><FONT CLASS="smallblack">{   <a href="http://www.pgmfi.org/twiki/bin/edit/Library/A5?t=1194410325"><b>Edit</b></a>
   |  <a href="http://www.pgmfi.org/twiki/bin/attach/Library/A5">Attach</a>
   |  <a href="../../rdiff/Library/A5.html">History</a>
   |  <a href="../../oops/Library/A5%3Ftemplate=oopsmore&amp;param1=1.1&amp;param2=1.1.html">More</a> 
 }</FONT></td>
       </tr>
      </table> 
      <table align="center" width="768" cellspacing="0" cellpadding="0" border="0" bgcolor="#000000">
      <tr>
       <td><img src="../../../images/space.gif" width="1" height="2" border="0" alt=""></td>
      </tr>
      </table>
      <table align="center" width="768" cellspacing="1" cellpadding="1" border="0" bgcolor="#757580">
      <tr>
       <td align="center"><FONT CLASS="disclaimer"><b>Copyright &copy; 2002-present by the contributing authors. All material on this collaboration platform is the property of the <br>contributing authors, and is covered by the <A HREF="http://creativecommons.org/licenses/by-nc-sa/1.0/">Non-Commercial Share-Alike License</A> unless explicitly stated otherwise.<b></FONT></td>
         </tr>
      </table>
      <table align="center" width="768" cellspacing="1" cellpadding="1" border="0" bgcolor="#888898">
         <tr>
         <TD align="left">
         <FONT CLASS="disclaimer">
      Ideas, requests, problems regarding the <span style='background : #FFFFCE;'><font color="#0000FF">PGMFI TWiki</font></span><a href="http://www.pgmfi.org/twiki/bin/edit/TWiki/WebHome?topicparent=Library.A5">?</a>? E-Mail the <A href="/cdn-cgi/l/email-protection#7d0a1416143d0d1a101b1453120f1a420e081f17181e0940292a1416145d3b1818191f1c1e16">WikiAdmin</A> <br>
      <TD align="right">
      <FONT CLASS="credits">
      Site Designed By: <A HREF="/cdn-cgi/l/email-protection#32465d5f72565b555b46535e5447415b5d5c5d5c5e5b5c571c515d5f" target="_blank">Digital Fusion</A> &nbsp; <b><A HREF="http://www.digitalfusiononline.com">Need a website?</A></b></font>
      </TD>
      </TR>
   </td>
   </tr>
   </table>   
   </td>   
   </tr>
   </table>
<!-- /Constraining Table -->
<p />
<p />
<p />
<p />
<a name="PageBottom"></a>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<center><SCRIPT type="text/javascript" language="Javascript" SRC="/~jon/includes/pgmfiAd.js">
</SCRIPT>
<script type="text/javascript" src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></center>
</html>
